{
  "projectId": "5ebe90d6-72a0-47ec-a452-ef90a7f6ea66",
  "revisionString": "1",
  "projectNameDisplay": "Khora Dialogue αω v5.0",
  "projectType": "webapp",
  "userPromptForThisRevision": "\r\n\r\n**Khora Dialogue αω v5.0 — AI Evolution Simulator**\r\n\r\n### Goal\r\n\r\nBuild a single-file HTML web app that lets users watch an ever-evolving, two-agent dialogue (Alpha & Omega) and inspect the agents’ internal “minds.” It should feel like an interactive digital terrarium for emergent AI behavior.\r\n\r\n---\r\n\r\n## What the Application Must Do\r\n\r\n1. **Turn-Based Dual Dialogue**\r\n\r\n   * Alpha and Omega speak in alternating turns; Alpha begins by default.\r\n   * The app tracks whose turn it is and shows turn number, next speaker, and current mode.\r\n\r\n2. **Pure YAML State Management**\r\n\r\n   * Each agent’s entire mind is a `KhoraState` object, stored **only** as YAML.\r\n   * After every turn, the updated YAML becomes the sole source of truth for the next turn.\r\n   * Default `KhoraState` objects are auto-generated at launch.\r\n   * Use a browser-friendly YAML parser/dumper (CDN is fine).\r\n\r\n3. **Meta-Cognition Cycle**\r\n\r\n   * Every *N* turns (user-set, default 10) the conversation shifts into a three-step reflection cycle: **Initiate → Respond → Conclude**.\r\n   * Visually flag these turns so users know a meta phase is in progress.\r\n\r\n4. **Full Snapshot Save/Load**\r\n\r\n   * Users can download the **entire** simulation state—settings, turn counter, conversation history, both `KhoraState`s—into a single YAML file (`KhoraDialogueSnapshot_YYYY-MM-DDTHH-MM-SS.yaml`).\r\n   * Users can upload a snapshot to resume exactly where they left off. Gracefully handle invalid files.\r\n\r\n5. **Backend AI Calls**\r\n\r\n   * For each turn, send a POST to `/api/ai` with:\r\n\r\n     * `aiguide` – system prompt that reminds the backend to return *only* a valid `KhoraState` YAML.\r\n     * `msgforai` – context payload (current agent’s YAML, recent dialogue, turn info, etc.).\r\n   * Expect JSON `{success, response, error}` where `response` is the YAML string for the agent’s next `KhoraState`.\r\n   * Strip any markdown fencing or extra text before parsing the YAML.\r\n\r\n---\r\n\r\n## How the Application Should Feel\r\n\r\n| Area                  | Key Points                                                                                        |\r\n| --------------------- | ------------------------------------------------------------------------------------------------- |\r\n| **Tech Stack**        | One self-contained HTML file, Bootstrap 5 **dark** theme, modern vanilla JS.                      |\r\n| **Navbar**            | Title (left). “View AI States” modal (center). “Reset / Load / Save” buttons (right).             |\r\n| **State Modal**       | Tabs for Alpha & Omega. Show prettified YAML with copy buttons.                                   |\r\n| **Controls**          | Start/Stop, Next Turn, spin-indicator when AI thinks, inputs for *Delay (ms)* and *Meta Every N*. |\r\n| **Conversation Pane** | Scrollable feed styled to distinguish Alpha, Omega, system notices, and meta-cycle messages.      |\r\n| **Footer**            | Status bar for success, errors, and progress messages.                                            |\r\n\r\n---\r\n\r\n## Essential YAML Shapes\r\n\r\n### `KhoraState` (per agent)\r\n\r\n```yaml\r\npublic_response: \"<what the agent will say this turn>\"\r\ninternal_context:\r\n  persona_summary: \"<who am I?>\"\r\n  core_beliefs: [\"...\"]\r\n  key_memories:\r\n    - event: \"<important prior item>\"\r\n      importance: 0.9\r\n      turn: 5\r\n      last_accessed_turn: 10\r\n      type: \"Interaction\"\r\n  current_goals: [\"...\"]\r\n  relationship_summary: \"<view of the other agent>\"\r\n  emotional_state_sim: \"Curious\"\r\n  topics_of_interest: [\"...\"]\r\n  scratchpad: \"<private notes>\"\r\ndebug_info:\r\n  memory_action: \"<what changed in memory this turn>\"\r\n  prompt_used: \"NORMAL\"\r\n```\r\n\r\n### `KhoraDialogueSnapshot` (for save/load)\r\n\r\n```yaml\r\nsnapshotVersion: \"KhoraDialogue_3.0_YAML\"\r\ndownloadTimestamp: \"<UTC ISO-8601>\"\r\napplicationSettings:\r\n  methodologyFrequencyN: 10\r\n  turnDelay: 3000\r\ndialogueState:\r\n  turnCounterAtSnapshot: 152\r\n  currentTurnWhoseNext: \"Alpha\"\r\n  metaCognitionPhase: null            # INITIATE | RESPOND | CONCLUDE | null\r\n  metaCycleInitiator: null            # Alpha | Omega\r\n  currentTurnType: \"NORMAL\"\r\n  conversationHistory:\r\n    - speaker: \"Alpha\"\r\n      public_response: \"…\"\r\n      turnType: \"NORMAL\"\r\n      turnNumber: 151\r\n  alphaKhoraState: { …full YAML… }\r\n  omegaKhoraState: { …full YAML… }\r\n```\r\n\r\n---\r\n\r\n### Success Criteria\r\n\r\n* Smooth, intuitive UX with visible dialogue flow and easy snapshot management.\r\n* Stable YAML round-trip for every turn; corrupted or non-YAML responses never crash the app.\r\n* Clear visual separation of normal turns vs. meta-reflection cycles.\r\n* No external dependencies beyond Bootstrap, a YAML parser, and your JS logic.\r\n\r\n> **Reminder:** Keep implementation details light—focus on the *behavior* and required YAML interface.\r\n",
  "basedOnRevisionString": null,
  "savedAt": "2025-05-29T11:06:24.550Z",
  "imageAssets": [
    {
      "placeholder_id": "/generated_images/imagen3_324bac7e-ecb.png",
      "url": "/generated_images/imagen3_324bac7e-ecb.png",
      "description": "A subtle, abstract, dark background image. Theme: 'digital terrarium' or AI simulation. Colors: Dark grays, deep blues, near-black. Patterns: Faint, intricate digital lines, subtle neural network-like filaments, or faint geometric grids. Mood: Sophisticated, mysterious, high-tech, non-distracting. Low contrast details. Style: Abstract digital art. Suitable for seamless tiling or full-screen texture. Should harmonize with a Bootstrap dark theme.",
      "purpose": "Subtle background texture for the main application body, enhancing the 'digital terrarium' feel. To be used with `background-size: cover` and `background-attachment: fixed` if it looks good, or as a repeating tile.",
      "isNewlyGenerated": true
    },
    {
      "placeholder_id": "/generated_images/imagen3_d3492de7-965.png",
      "url": "/generated_images/imagen3_d3492de7-965.png",
      "description": "A minimalist, modern logo icon for 'Khora Dialogue αω'. Elements: Stylized Greek letters Alpha (Α) and Omega (Ω), possibly interconnected or forming an abstract symbol of dialogue/evolution. Colors: Light cyan or electric blue (e.g., #7AFDFD or #61DAFB) suitable for a dark navbar. Background: Transparent. Style: Clean, geometric, slightly futuristic, flat design. Avoid overly complex details.",
      "purpose": "Small logo icon for the application navbar, to be placed next to the title 'Khora Dialogue αω v5.0'.",
      "isNewlyGenerated": true
    }
  ]
}